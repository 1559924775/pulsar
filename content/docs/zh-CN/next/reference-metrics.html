<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Pulsar Metrics · Apache Pulsar</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;style type=&quot;text/css&quot;&gt;"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="Pulsar Metrics · Apache Pulsar"/><meta property="og:type" content="website"/><meta property="og:url" content="https://pulsar.incubator.apache.org/"/><meta property="og:description" content="&lt;style type=&quot;text/css&quot;&gt;"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://pulsar.incubator.apache.org/img/pulsar.svg"/><link rel="shortcut icon" href="/img/pulsar.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://pulsar.incubator.apache.org/blog/atom.xml" title="Apache Pulsar Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://pulsar.incubator.apache.org/blog/feed.xml" title="Apache Pulsar Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-102219959-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code-blocks-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/custom.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-CN"><img class="logo" src="/img/pulsar.svg" alt="Apache Pulsar"/></a><a href="/zh-CN/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/zh-CN/next/standalone" target="_self">文档</a></li><li class=""><a href="/zh-CN/download" target="_self">下载</a></li><li class="siteNavGroupActive"><a href="/docs/zh-CN/next/client-libraries" target="_self">客户端</a></li><li class=""><a href="#restapis" target="_self">REST API</a></li><li class=""><a href="#cli" target="_self">命令行</a></li><li class=""><a href="/blog/" target="_self">博客</a></li><li class=""><a href="#community" target="_self">社区</a></li><li class=""><a href="#apache" target="_self">Apache</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/next/reference-metrics">English</a></li><li><a href="/docs/ja/next/reference-metrics">日本語</a></li><li><a href="/docs/fr/next/reference-metrics">Français</a></li><li><a href="/docs/ko/next/reference-metrics">한국어</a></li><li><a href="/docs/zh-TW/next/reference-metrics">繁體中文</a></li><li><a href="https://crowdin.com/project/apache-pulsar" target="_blank" rel="noreferrer noopener">参与翻译</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>参考</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Get Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/standalone">本地运行 Pulsar</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/standalone-docker">在 Docker 中运行 Pulsar</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/kubernetes-helm">在 Kubernetes 中运行 Pulsar</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">概念和架构</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-messaging">消息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-architecture-overview">架构</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-clients">客户端</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-replication">跨机房复制</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-multi-tenancy">多租户</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-authentication">认证和授权</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-topic-compaction">消息压缩</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-proxy-sni-routing">Pulsar Proxy 支持 SNI 路由</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/concepts-multiple-advertised-listeners">配置 Advertised 监听器</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Pulsar Schema</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/schema-get-started">开始</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/schema-understand">了解 schema</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/schema-evolution-compatibility">Schema 演化和兼容</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/schema-manage">管理 Schema</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Pulsar Functions</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-worker">设置：Pulsar Functions Worker</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-runtime">设置：配置 Pulsar Functions 运行时</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-develop">操作：开发</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-package">如何打包</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-debug">操作：调试</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-deploy">操作：部署</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/functions-cli">参考：命令</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/window-functions-context">窗口函数：上下文</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Pulsar IO</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-quickstart">开始</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-use">Use</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-debug">调试</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-connectors">内置 connector</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-cdc">CDC connector</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-develop">开发</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/io-cli">CLI</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Pulsar SQL</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/sql-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/sql-getting-started">查询数据</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/sql-deployment-configurations">配置和部署</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/sql-rest-api">REST API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">层级存储</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-aws">亚马逊 AWS S3 offloader</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-gcs">GCS offloader</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-filesystem">Filesystem offloader</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-azure">Azure BlobStore offloader</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/tiered-storage-aliyun">阿里云 OSS offloader</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">事务</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-why">Why transactions?</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-what">What are transactions?</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-how">How transactions work?</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-use">How to use transactions?</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/txn-monitor">如何监控事务？</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Kubernetes (Helm)</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-prepare">准备</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-install">安装</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-deploy">部署</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-upgrade">升级</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/helm-tools">所需工具</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">部署</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-aws">Amazon Web Services</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-kubernetes">Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-bare-metal">裸机</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-bare-metal-multi-cluster">裸机多集群部署</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-dcos">DC/OS</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/deploy-monitoring">Monitor</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">系统管理</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-zk-bk">ZooKeeper 和 BookKeeper</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-geo">跨地域复制</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-pulsar-manager">Pulsar Manager</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-stats">Pulsar 统计数据</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-load-balance">负载均衡</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-proxy">Pulsar proxy</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-upgrade">升级</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/administration-isolation">Pulsar isolation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">安全</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-tls-transport">使用TLS进行传输加密</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-tls-authentication">使用TLS进行认证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-tls-keystore">Using TLS with KeyStore configure</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-jwt">使用 JWT 认证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-athenz">使用 Athenz 验证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-kerberos">使用 Kerberos 进行身份认证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-oauth2">使用 OAuth 2.0 访问令牌进行身份验证</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-authorization">授权和ACL</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-encryption">端到端加密</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-extending">扩展</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/security-bouncy-castle">Bouncy Castle Providers</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">性能</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/performance-pulsar-perf">Pulsar Perf</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">客户端库</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-java">Java</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-go">Go</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-python">Python</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-cpp">C++</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-node">Node.js
</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-websocket">WebSocket</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/client-libraries-dotnet">C#</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Admin API</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-overview">概述</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-clusters">集群</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-tenants">租户</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-brokers">Brokers</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-namespaces">命名空间</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-permissions">权限管理</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-topics">Topic</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-functions">Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/admin-api-packages">Package</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">适配器</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/adaptors-kafka">Kafka 客户端封装</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/adaptors-spark">Apache Spark</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/adaptors-storm">Apache Storm</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">参考手册</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-compaction">Topic compaction</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-deduplication">消息去重</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-non-persistent">非持久化消息</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-retention-expiry">消息保留和过期</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-encryption">加密</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-message-queue">消息队列</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/cookbooks-bookkeepermetadata">Bookeeper Ledger 元数据</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">开发</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/develop-tools">模拟工具</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/develop-binary-protocol">二进制协议</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/develop-load-manager">模块化负载管理器</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">参考</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/reference-terminology">术语</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/reference-cli-tools">Pulsar CLI tools</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/next/reference-configuration">Pulsar configuration</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/zh-CN/next/reference-metrics">Pulsar Metrics</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/apache-pulsar/zh-CN" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">Pulsar Metrics</h1></header><article><div><span><style type="text/css">
  table{
    font-size: 80%;
  }
</style>
<p>Pulsar 以 Prometheus 的格式暴露如下度量值。 你可以用这些度量值监视你的集群。</p>
<ul>
<li><a href="#zookeeper">ZooKeeper</a></li>
<li><a href="#bookkeeper">BookKeeper</a></li>
<li><a href="#broker">Broker</a></li>
<li><a href="#pulsar-functions">Pulsar Functions</a></li>
<li><a href="#proxy">代理</a></li>
<li><a href="#pulsar-sql-worker">Pulsar SQL Worker</a></li>
<li><a href="#pulsar-transaction">Pulsar transaction</a></li>
</ul>
<p>可以使用下列类型的度量值：</p>
<ul>
<li><a href="https://prometheus.io/docs/concepts/metric_types/#counter">Counter</a>: 累计度量，代表一个单调递增的计数器。 值默认会增加。 你可以将值重置为零或重新启动你的集群。</li>
<li><a href="https://prometheus.io/docs/concepts/metric_types/#gauge">Gauge</a>: 本指标代表一个可以随意增加或减少的数值。</li>
<li><a href="https://prometheus.io/docs/concepts/metric_types/#histogram">Histogram</a>: 直方图样本观测 (通常是请求持续时间和响应大小) ，并将它们计入可配置的 bucket 中。</li>
<li><a href="https://prometheus.io/docs/concepts/metric_types/#summary">Summary</a>: 与直方图类似的总结样本观察 (通常是请求持续时间和响应大小)。 但它同时也提供了总观测次数以及所有观测值的总和，它会在滑动的时间窗口上计算可配置的分位数。</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="zookeeper"></a><a href="#zookeeper" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZooKeeper</h2>
<p>ZooKeeper 度量值会暴露在端口 <code>8000</code> 的 &quot;/metrics&quot;下。 You can use a different port by configuring the <code>metricsProvider.httpPort</code> in conf/zookeeper.conf.</p>
<h3><a class="anchor" aria-hidden="true" id="服务器度量值"></a><a href="#服务器度量值" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>服务器度量值</h3>
<table>
<thead>
<tr><th>配置项</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>zookeeper_server_znode_count</td><td>计量表</td><td>存储的 z-nodes 数量。</td></tr>
<tr><td>zookeeper_server_data_size_bytes</td><td>计量表</td><td>储存的所有 z-nodes 的总大小。</td></tr>
<tr><td>zookeeper_server_connections</td><td>计量表</td><td>当前打开的连接数量。</td></tr>
<tr><td>zookeeper_server_watches_count</td><td>计量表</td><td>注册的观察者数量。</td></tr>
<tr><td>zookeeper_server_ephemerals_count</td><td>计量表</td><td>临时 z-nodes 的数量。</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="请求度量值"></a><a href="#请求度量值" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>请求度量值</h3>
<table>
<thead>
<tr><th>配置项</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>zookeeper_server_requests</td><td>计数器</td><td>特定服务器收到请求的总数。</td></tr>
<tr><td>zookeeper_server_requests_latency_ms</td><td>总结</td><td>按毫秒计算的请求延迟。</td></tr>
<tr><td>可用的标签： <em>type</em> (write, read).</td></tr>
</tbody>
</table>
<ul>
<li><em>write</em>: 将数据写入 ZooKeeper 的请求。</li>
<li><em>read</em>: 从 ZooKeeper 读数据的请求。</li>
</ul>
<p>|</p>
<h2><a class="anchor" aria-hidden="true" id="bookkeeper"></a><a href="#bookkeeper" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BookKeeper</h2>
<p>BookKeeper 度量值会暴露在端口 <code>8000</code> 的&quot;/metrics&quot;下。 你可以通过更新 <code>bookkeeper.conf</code> 配置文件中的 <code>prometheusStatsHttpPort</code> 来更改端口。</p>
<h3><a class="anchor" aria-hidden="true" id="服务器度量值-1"></a><a href="#服务器度量值-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>服务器度量值</h3>
<table>
<thead>
<tr><th>配置项</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>bookie_SERVER_STATUS</td><td>计量表</td><td>bookie 服务器的服务状态。</td></tr>
</tbody>
</table>
<ul>
<li>1: bookie 正运行于可写入模式。</li>
<li>0: bookie 正运行于只读模式。</li>
</ul>
<p>| | bookkeeper_server_ADD_ENTRY_count | 计数器 | bookie 收到的 ADD_ENTRY 请求数总数。 <code>success</code> 标签会被用于区分成功与失败。 | | bookkeeper_server_READ_ENTRY_count | 计数器 | bookie 收到的 READ_ENTRY 请求数总数。 <code>success</code> 标签会被用于区分成功与失败。 | | bookie_WRITE_BYTES | 计数器 | 写入 bookie 的总字节数。 | | bookie_READ_BYTES | 计数器 | 从 bookie 读取的总字节数。 | | bookkeeper_server_ADD_ENTRY_REQUEST | Summary | The summary of request latency of ADD_ENTRY requests at the bookie. <code>success</code> 标签会被用于区分成功与失败。 | | bookkeeper_server_READ_ENTRY_REQUEST | Summary | The summary of request latency of READ_ENTRY requests at the bookie. <code>success</code> 标签会被用于区分成功与失败。 |</p>
<h3><a class="anchor" aria-hidden="true" id="日志度量值"></a><a href="#日志度量值" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>日志度量值</h3>
<table>
<thead>
<tr><th>配置项</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>bookie_journal_JOURNAL_SYNC_count</td><td>计数器</td><td>bookie 中日志 fsync 操作的总次数。 <code>success</code> 标签会被用于区分成功与失败。</td></tr>
<tr><td>bookie_journal_JOURNAL_QUEUE_SIZE</td><td>计量表</td><td>日志队列中待处理的请求总数。</td></tr>
<tr><td>bookie_journal_JOURNAL_FORCE_WRITE_QUEUE_SIZE</td><td>计量表</td><td>在强制写入队列中等待的强制写入 (fsync) 请求总数。</td></tr>
<tr><td>bookie_journal_JOURNAL_CB_QUEUE_SIZE</td><td>计量表</td><td>回调队列中待处理的回调总数。</td></tr>
<tr><td>bookie_journal_JOURNAL_ADD_ENTRY</td><td>总结</td><td>The summary of request latency of adding entries to the journal.</td></tr>
<tr><td>bookie_journal_JOURNAL_SYNC</td><td>总结</td><td>The summary of fsync latency of syncing data to the journal disk.</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="存储度量值"></a><a href="#存储度量值" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>存储度量值</h3>
<table>
<thead>
<tr><th>配置项</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>bookie_ledgers_count</td><td>计量表</td><td>bookie 中存储的 ledger 总数。</td></tr>
<tr><td>bookie_entries_count</td><td>计量表</td><td>bookie 中存储的条目总数。</td></tr>
<tr><td>bookie_write_cache_size</td><td>计量表</td><td>bookie 的写缓存大小（以字节为单位）。</td></tr>
<tr><td>bookie_read_cache_size</td><td>计量表</td><td>bookie 的读缓存大小（以字节为单位）。</td></tr>
<tr><td>bookie_DELETED_LEDGER_COUNT</td><td>计数器</td><td>bookie 被启动以来被删除的 ledger 总数。</td></tr>
<tr><td>bookie_ledger_writable_dirs</td><td>计量表</td><td>bookie 中可写入目录的数量。</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="broker"></a><a href="#broker" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Broker</h2>
<p>broker 度量值会暴露在端口 <code>8080</code> 的&quot;/metrics&quot;下。 你可以通过更新 <code>broker.conf</code> 配置文件中的 <code>webServicePort</code> 来更改端口。</p>
<p>broker 暴露的所有度量值会带有 <code>cluster=${pulsar_cluster}</code> 标签。 Pulsar 集群的名称是 <code>${pulsar_cluster}</code> 的值，也就是你在 <code>broker.conf</code> 文件中所设置的。</p>
<p>如下的度量值对 broker 可用：</p>
<ul>
<li><a href="#zookeeper">ZooKeeper</a>
<ul>
<li><a href="#server-metrics">服务器度量值</a></li>
<li><a href="#request-metrics">请求度量值</a></li>
</ul></li>
<li><a href="#bookkeeper">BookKeeper</a>
<ul>
<li><a href="#server-metrics-1">服务器度量值</a></li>
<li><a href="#journal-metrics">日志度量值</a></li>
<li><a href="#storage-metrics">存储度量值</a></li>
</ul></li>
<li><a href="#broker">Broker</a>
<ul>
<li><a href="#namespace-metrics">命名空间度量值</a>
<ul>
<li><a href="#replication-metrics">复制度量值</a></li>
</ul></li>
<li><a href="#topic-metrics">主题度量值</a>
<ul>
<li><a href="#replication-metrics-1">复制度量值</a></li>
</ul></li>
<li><a href="#managedledgercache-metrics">ManagedLedgerCache 度量值</a></li>
<li><a href="#managedledger-metrics">ManagedLedger 度量值</a></li>
<li><a href="#loadbalancing-metrics">LoadBalancing 度量值</a>
<ul>
<li><a href="#bundleunloading-metrics">BundleUnloading 度量值</a></li>
<li><a href="#bundlesplit-metrics">BundleSplit 度量值</a></li>
</ul></li>
<li><a href="#subscription-metrics">Subscription metrics</a></li>
<li><a href="#consumer-metrics">Consumer metrics</a></li>
<li><a href="#managed-ledger-bookie-client-metrics">托管的 ledger bookie 客户端度量值</a></li>
<li><a href="#token-metrics">Token metrics</a></li>
<li><a href="#authentication-metrics">Authentication metrics</a></li>
<li><a href="#connection-metrics">Connection metrics</a></li>
</ul></li>
<li><a href="#pulsar-functions">Pulsar Functions</a></li>
<li><a href="#proxy">代理</a></li>
<li><a href="#pulsar-sql-worker">Pulsar SQL Worker</a></li>
<li><a href="#pulsar-transaction">Pulsar transaction</a></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="命名空间度量值"></a><a href="#命名空间度量值" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>命名空间度量值</h3>
<blockquote>
<p>命名空间度量值只有在 <code>exposeTopicLevelMetricsInPrometheus</code> 被设为 <code>false</code> 时才暴露。</p>
</blockquote>
<p>所有命名空间度量值都带有以下标签：</p>
<ul>
<li><em>集群</em>: <code>cluster=${pulsar_cluster}</code>。 <code>${pulsar_cluster}</code> 就是你在 <code>broker.conf</code> 中配置的集群名称。</li>
<li><em>命名空间</em>: <code>namespace=${pulsar_namespace}</code>。 <code>${pulsar_namespace}</code> 是命名空间名称。</li>
</ul>
<table>
<thead>
<tr><th>配置项</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>pulsar_topics_count</td><td>计量表</td><td>命名空间下由此 broker 拥有的 Pulsar 主题数。</td></tr>
<tr><td>pulsar_subscriptions_count</td><td>计量表</td><td>命名空间下由此 broker 服务的 Pulsar 订阅数。</td></tr>
<tr><td>pulsar_producers_count</td><td>计量表</td><td>命名空间下连接到此 broker 的活动生产者数。</td></tr>
<tr><td>pulsar_consumers_count</td><td>计量表</td><td>命名空间下连接到此 broker 的活动消费者数。</td></tr>
<tr><td>pulsar_rate_in</td><td>计量表</td><td>命名空间下的所有消息进入此 broker 的频率（消息/秒）。</td></tr>
<tr><td>pulsar_rate_out</td><td>计量表</td><td>命名空间下的所有消息从此 broker 发出的频率（消息/秒）。</td></tr>
<tr><td>pulsar_throughput_in</td><td>计量表</td><td>命名空间下数据进入此 broker 的总吞吐量（字节/秒）。</td></tr>
<tr><td>pulsar_throughput_out</td><td>计量表</td><td>命名空间下数据由此 broker 发出的总吞吐量（字节/秒）。</td></tr>
<tr><td>pulsar_storage_size</td><td>计量表</td><td>命名空间下由此 broker 拥有的主题的总存储大小 (字节)。</td></tr>
<tr><td>pulsar_storage_backlog_size</td><td>计量表</td><td>命名空间下由此 broker 拥有的总积压大小 (消息)。</td></tr>
<tr><td>pulsar_storage_offloaded_size</td><td>计量表</td><td>此命名空间中已卸载到层级存储的数据总量(字节)。</td></tr>
<tr><td>pulsar_storage_write_rate</td><td>计量表</td><td>此命名空间写入到存储的总消息批处理(条目)数 (消息批处理/秒)。</td></tr>
<tr><td>pulsar_storage_read_rate</td><td>计量表</td><td>此命名空间从存储中读取的总消息批处理(条目)数 (消息批处理/秒)。</td></tr>
<tr><td>pulsar_subscription_delayed</td><td>计量表</td><td>被延迟派发的总消息批处理(条目)数。</td></tr>
<tr><td>pulsar_storage_write_latency_le_*</td><td>直方图</td><td>The entry rate of a namespace that the storage write latency is smaller with a given threshold.</td></tr>
<tr><td>可用的阈值：</td></tr>
</tbody>
</table>
<ul>
<li>pulsar_storage_write_latency_le_0_5: &lt;= 0.5ms</li>
<li>pulsar_storage_write_latency_le_1: &lt;= 1ms</li>
<li>pulsar_storage_write_latency_le_5: &lt;= 5ms</li>
<li>pulsar_storage_write_latency_le_10: &lt;= 10ms</li>
<li>pulsar_storage_write_latency_le_20: &lt;= 20ms</li>
<li>pulsar_storage_write_latency_le_50: &lt;= 50ms</li>
<li>pulsar_storage_write_latency_le_100: &lt;= 100ms</li>
<li>pulsar_storage_write_latency_le_200: &lt;= 200ms</li>
<li>pulsar_storage_write_latency_le_1000: &lt;= 1s</li>
<li>pulsar_storage_write_latency_le_overflow: &gt; 1s</li>
</ul>
<p>| | pulsar_entry_size_le_* | 直方图 | The entry rate of a namespace that the entry size is smaller with a given threshold.<br>
可用的阈值：</p>
<ul>
<li>pulsar_entry_size_le_128: &lt;= 128 bytes</li>
<li>pulsar_entry_size_le_512: &lt;= 512 bytes</li>
<li>pulsar_entry_size_le_1_kb: &lt;= 1 KB</li>
<li>pulsar_entry_size_le_2_kb: &lt;= 2 KB</li>
<li>pulsar_entry_size_le_4_kb: &lt;= 4 KB</li>
<li>pulsar_entry_size_le_16_kb: &lt;= 16 KB</li>
<li>pulsar_entry_size_le_100_kb: &lt;= 100 KB</li>
<li>pulsar_entry_size_le_1_mb: &lt;= 1 MB</li>
<li>pulsar_entry_size_le_overflow: &gt; 1 MB</li>
</ul>
<p>|</p>
<h4><a class="anchor" aria-hidden="true" id="复制度量值"></a><a href="#复制度量值" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>复制度量值</h4>
<p>如果一个命名空间被配置为在多个Pulsar集群中复制，当<code>replicationMetricsEnabled</code> 启用时，相应的复制度量值也会暴露出来。</p>
<p>所有的复制度量值也带有 <code>remoteCluster=${pulsar_remote_cluster}</code> 标签。</p>
<table>
<thead>
<tr><th>配置项</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>pulsar_replication_rate_in</td><td>计量表</td><td>命名空间从远程集群进行复制的总消息频率（消息/秒）。</td></tr>
<tr><td>pulsar_replication_rate_out</td><td>计量表</td><td>命名空间复制到远程集群的总消息频率（消息/秒）。</td></tr>
<tr><td>pulsar_replication_throughput_in</td><td>计量表</td><td>命名空间从远程集群进行复制的总吞吐量（字节/秒）。</td></tr>
<tr><td>pulsar_replication_throughput_out</td><td>计量表</td><td>命名空间复制到远程集群的总吞吐量（字节/秒）。</td></tr>
<tr><td>pulsar_replication_backlog</td><td>计量表</td><td>命名空间复制到远程集群的总积压量（消息）。</td></tr>
<tr><td>pulsar_replication_rate_expired</td><td>计量表</td><td>Total rate of messages expired (messages/second).</td></tr>
<tr><td>pulsar_replication_connected_count</td><td>计量表</td><td>The count of replication-subscriber up and running to replicate to remote cluster.</td></tr>
<tr><td>pulsar_replication_delay_in_seconds</td><td>计量表</td><td>Time in seconds from the time a message was produced to the time when it is about to be replicated.</td></tr>
</tbody>
</table>
<pre><code class="hljs">
<span class="hljs-comment">### 主题度量值</span>

&gt; 主题度量值只有在 `exposeTopicLevelMetricsInPrometheus` 被设为 `true` 时才暴露。

所有主题度量值都带有以下标签：

- <span class="hljs-symbol">*</span>集群<span class="hljs-symbol">*</span>: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。
- <span class="hljs-symbol">*</span>命名空间<span class="hljs-symbol">*</span>: `namespace=${pulsar_namespace}`。 `${pulsar_namespace}` 是命名空间名称。
- <span class="hljs-symbol">*</span>主题<span class="hljs-symbol">*</span>: `topic=${pulsar_topic}`。 `${pulsar_topic}` 是主题名。

|<span class="hljs-string"> 配置项                                    </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                                                                                   </span>|
|<span class="hljs-string"> -------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ---------------------------------------------------------------------------------------------------- </span>|
|<span class="hljs-string"> pulsar_subscriptions_count           </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题下由此 broker 服务的 Pulsar 订阅数。                                                                         </span>|
|<span class="hljs-string"> pulsar_producers_count               </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题下连接到此 broker 的活动生产者数。                                                                              </span>|
|<span class="hljs-string"> pulsar_consumers_count               </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题下连接到此 broker 的活动消费者数。                                                                              </span>|
|<span class="hljs-string"> pulsar_rate_in                       </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题下的所有消息进入此 broker 的频率（消息/秒）。                                                                        </span>|
|<span class="hljs-string"> pulsar_rate_out                      </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题下的所有消息从此 broker 发出的频率（消息/秒）。                                                                       </span>|
|<span class="hljs-string"> pulsar_throughput_in                 </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题下数据进入此 broker 的总吞吐量（字节/秒）。                                                                         </span>|
|<span class="hljs-string"> pulsar_throughput_out                </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题下数据由此 broker 发出的总吞吐量（字节/秒）。                                                                        </span>|
|<span class="hljs-string"> pulsar_storage_size                  </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题下由此 broker 拥有的主题的总存储大小 (字节)。                                                                       </span>|
|<span class="hljs-string"> pulsar_storage_backlog_size          </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题下由此 broker 拥有的总积压大小 (消息)。                                                                          </span>|
|<span class="hljs-string"> pulsar_storage_offloaded_size        </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 此主题中已卸载到层级存储的数据总量(字节)。                                                                               </span>|
|<span class="hljs-string"> pulsar_storage_backlog_quota_limit </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 此主题中限制积压定额的数据总量(字节)。                                                                                 </span>|
|<span class="hljs-string"> pulsar_storage_write_rate            </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 此主题写入到存储的总消息批处理(条目)数 (消息批处理/秒)。                                                                      </span>|
|<span class="hljs-string"> pulsar_storage_read_rate             </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 此主题从存储中读取的总消息批处理(条目)数 (消息批处理/秒)。                                                                     </span>|
|<span class="hljs-string"> pulsar_subscription_delayed          </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 被延迟派发的总消息批处理(条目)数。                                                                                   </span>|
|<span class="hljs-string"> pulsar_storage_write_latency_le_*  </span>|<span class="hljs-string"> 直方图 </span>|<span class="hljs-string"> The entry rate of a topic that the storage write latency is smaller with a given threshold.  
可用的阈值： </span>|


- pulsar_storage_write_latency_le_0_5: <span class="hljs-variable">&lt;= 0.5ms 
- pulsar_storage_write_latency_le_1: &lt;= 1ms
- pulsar_storage_write_latency_le_5: &lt;= 5ms
- pulsar_storage_write_latency_le_10: &lt;= 10ms
- pulsar_storage_write_latency_le_20: &lt;= 20ms
- pulsar_storage_write_latency_le_50: &lt;= 50ms
- pulsar_storage_write_latency_le_100: &lt;= 100ms
- pulsar_storage_write_latency_le_200: &lt;= 200ms
- pulsar_storage_write_latency_le_1000: &lt;= 1s
- pulsar_storage_write_latency_le_overflow: &gt;</span> 1s

|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_entry_size_le_* </span>|<span class="hljs-string"> 直方图 </span>|<span class="hljs-string"> The entry rate of a topc that the entry size is smaller with a given threshold.  
可用的阈值：   


- pulsar_entry_size_le_128: &lt;= 128 bytes 
- pulsar_entry_size_le_512: &lt;= 512 bytes
- pulsar_entry_size_le_1_kb: &lt;= 1 KB
- pulsar_entry_size_le_2_kb: &lt;= 2 KB
- pulsar_entry_size_le_4_kb: &lt;= 4 KB
- pulsar_entry_size_le_16_kb: &lt;= 16 KB
- pulsar_entry_size_le_100_kb: &lt;= 100 KB
- pulsar_entry_size_le_1_mb: &lt;= 1 MB
- pulsar_entry_size_le_overflow: &gt; 1 MB

</span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_in_bytes_total </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 此主题接收的总字节数 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_in_messages_total </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 此主题接收的总消息数 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_out_bytes_total </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 从此主题中读取的总字节数 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_out_messages_total </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 从此主题中读取的总消息数 </span>|

<span class="hljs-comment">#### 复制度量值</span>

如果主题所属的命名空间被配置为在多个Pulsar集群中复制，当`replicationMetricsEnabled` 启用时，相应的复制度量值也会暴露出来。

所有的复制度量值带有 `remoteCluster=${pulsar_remote_cluster}` 标签。

|<span class="hljs-string"> 配置项                                 </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                       </span>|
|<span class="hljs-string"> ----------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ------------------------ </span>|
|<span class="hljs-string"> pulsar_replication_rate_in        </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题从远程集群进行复制的总消息频率（消息/秒）。 </span>|
|<span class="hljs-string"> pulsar_replication_rate_out       </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题复制到远程集群的总消息频率（消息/秒）。   </span>|
|<span class="hljs-string"> pulsar_replication_throughput_in  </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题从远程集群进行复制的总吞吐量（字节/秒）。  </span>|
|<span class="hljs-string"> pulsar_replication_throughput_out </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题复制到远程集群的总吞吐量（字节/秒）。    </span>|
|<span class="hljs-string"> pulsar_replication_backlog        </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 主题复制到远程集群的总积压量（消息）。      </span>|


<span class="hljs-comment">### ManagedLedgerCache 度量值</span>

所有 ManagedLedgerCache 度量值都带有以下标签：

- 集群: cluster=${pulsar_cluster}。 ${pulsar_cluster} 就是你在 `broker.conf` 中配置的集群名称。

|<span class="hljs-string"> 配置项                                                  </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                    </span>|
|<span class="hljs-string"> ---------------------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ------------------------------------- </span>|
|<span class="hljs-string"> pulsar_ml_cache_evictions                          </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 在过去 1 分钟内的缓存驱逐数。                      </span>|
|<span class="hljs-string"> pulsar_ml_cache_hits_rate                        </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 每秒缓存命中数。                              </span>|
|<span class="hljs-string"> pulsar_ml_cache_hits_throughput                  </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 从缓存中取出的数据量，以字节/秒为单位                   </span>|
|<span class="hljs-string"> pulsar_ml_cache_misses_rate                      </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 每秒缓存失效数                               </span>|
|<span class="hljs-string"> pulsar_ml_cache_misses_throughput                </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 从缓存中取出的数据量，以字节/秒为单位                   </span>|
|<span class="hljs-string"> pulsar_ml_cache_pool_active_allocations          </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 直接场地（direct arena）中当前活动的分配数           </span>|
|<span class="hljs-string"> pulsar_ml_cache_pool_active_allocations_huge   </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 直接场地（direct arena）中当前活动的大型（huge）分配数   </span>|
|<span class="hljs-string"> pulsar_ml_cache_pool_active_allocations_normal </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 直接场地（direct arena）中当前活动的正常（normal）分配数 </span>|
|<span class="hljs-string"> pulsar_ml_cache_pool_active_allocations_small  </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 直接场地（direct arena）中当前活动的小型（small）分配数  </span>|
|<span class="hljs-string"> pulsar_ml_cache_pool_active_allocations_tiny   </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 直接场地（direct arena）中当前活动的超小型（tiny）分配数  </span>|
|<span class="hljs-string"> pulsar_ml_cache_pool_allocated                   </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 直接场地（direct arena）中为 chunk 列表分配的总内存   </span>|
|<span class="hljs-string"> pulsar_ml_cache_pool_used                        </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 直接场地（direct arena）中 chunk 列表使用的总内存    </span>|
|<span class="hljs-string"> pulsar_ml_cache_used_size                        </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 用于存储条目负载的字节大小                         </span>|
|<span class="hljs-string"> pulsar_ml_count                                    </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 当前打开的托管 ledger 数量。                    </span>|


<span class="hljs-comment">### ManagedLedger 度量值</span>

所有 managedLedger 度量值都带有以下标签：

- 集群: cluster=${pulsar_cluster}。 ${pulsar_cluster} 就是你在 `broker.conf` 中配置的集群名称。
- 命名空间: namespace=${pulsar_namespace}。 ${pulsar_namespace} 是命名空间名称。
- 分位数: quantile=${quantile}. 分位数是只提供给 `直方图` 的类型度量值，代表了给定 Bucket 的阈值。

|<span class="hljs-string"> 配置项                                </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                   </span>|
|<span class="hljs-string"> ---------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ------------------------------------ </span>|
|<span class="hljs-string"> pulsar_ml_AddEntryBytesRate      </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 添加消息的字节/秒频率                          </span>|
|<span class="hljs-string"> pulsar_ml_AddEntryErrors         </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 失败的 addEntry 请求数                     </span>|
|<span class="hljs-string"> pulsar_ml_AddEntryLatencyBuckets </span>|<span class="hljs-string"> 直方图 </span>|<span class="hljs-string"> 给定分位数（阈值）的 ledger 添加条目延迟 。  
可用的分位数: </span>|


- quantile=<span class="hljs-string">"0.0_0.5"</span> 是 AddEntryLatency 介于 (0.0ms, 0.5ms]
- quantile=<span class="hljs-string">"0.5_1.0"</span> 是 AddEntryLatency 介于 (0.5ms, 1.0ms]
- quantile=<span class="hljs-string">"1.0_5.0"</span> 是 AddEntryLatency 介于 (1ms, 5ms]
- quantile=<span class="hljs-string">"5.0_10.0"</span> 是 AddEntryLatency 介于 (5ms, 10ms]
- quantile=<span class="hljs-string">"10.0_20.0"</span> 是 AddEntryLatency 介于 (10ms, 20ms]
- quantile=<span class="hljs-string">"20.0_50.0"</span> 是 AddEntryLatency 介于 (20ms, 50ms]
- quantile=<span class="hljs-string">"50.0_100.0"</span> 是 AddEntryLatency 介于 (50ms, 100ms]
- quantile=<span class="hljs-string">"100.0_200.0"</span> 是 AddEntryLatency 介于 (100ms, 200ms]
- quantile=<span class="hljs-string">"200.0_1000.0"</span> 是 AddEntryLatency 介于 (200ms, 1s]

|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_AddEntryLatencyBuckets_OVERFLOW </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 添加条目延迟 &gt; 1s </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_AddEntryMessagesRate </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 消息添加的消息/秒频率 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_AddEntrySucceed </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 成功的addEntry 请求数 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_EntrySizeBuckets </span>|<span class="hljs-string"> 直方图 </span>|<span class="hljs-string"> 指定了分位数的 ledger 的添加条目大小。  
可用的分位数:   


- quantile="0.0_128.0" 是 EntrySize 介于 (0byte, 128byte]
- quantile="128.0_512.0" 是 EntrySize 介于 (128byte, 512byte]
- quantile="512.0_1024.0" 是 EntrySize 介于 (512byte, 1KB]
- quantile="1024.0_2048.0" 是 EntrySize 介于 (1KB, 2KB]
- quantile="2048.0_4096.0" 是 EntrySize 介于 (2KB, 4KB]
- quantile="4096.0_16384.0" 是 EntrySize 介于 (4KB, 16KB]
- quantile="16384.0_102400.0" 是 EntrySize 介于 (16KB, 100KB]
- quantile="102400.0_1232896.0" 是 EntrySize 介于 (100KB, 1MB]

</span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_EntrySizeBuckets_OVERFLOW </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 添加条目大小 &gt; 1MB </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_LedgerSwitchLatencyBuckets </span>|<span class="hljs-string"> 直方图 </span>|<span class="hljs-string"> 给定了分位数的 ledger 切换延迟。   
可用的分位数:   


- quantile="0.0_0.5" 是 EntrySize 介于 (0ms, 0.5ms]
- quantile="0.5_1.0" 是 EntrySize 介于 (0.5ms, 1ms]
- quantile="1.0_5.0" 是 EntrySize 介于 (1ms, 5ms]
- quantile="5.0_10.0" 是 EntrySize 介于 (5ms, 10ms]
- quantile="10.0_20.0" 是 EntrySize 介于 (10ms, 20ms]
- quantile="20.0_50.0" 是 EntrySize 介于 (20ms, 50ms]
- quantile="50.0_100.0" 是 EntrySize 介于 (50ms, 100ms]
- quantile="100.0_200.0" 是 EntrySize 介于 (100ms, 200ms]
- quantile="200.0_1000.0" 是 EntrySize 介于 (200ms, 1000ms]

</span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_LedgerSwitchLatencyBuckets_OVERFLOW </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> ledger 切换延迟 &gt; 1s </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_MarkDeleteRate </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 标记-删除操作频率 操作/秒 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_NumberOfMessagesInBacklog </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 所有消费者的积压消息数 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_ReadEntriesBytesRate </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 消息读取的字节/秒频率 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_ReadEntriesErrors </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 失败的 readEntries 请求数 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_ReadEntriesRate </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 消息读取的消息数/秒频率 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_ReadEntriesSucceeded </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 成功的 readEntries 请求数 </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_ml_StoredMessagesSize </span>|<span class="hljs-string"> 计量器 </span>|<span class="hljs-string"> 活动 ledger 中的消息总大小 (计算已存储的多个副本) </span>|

<span class="hljs-comment">### Managed cursor acknowledgment state</span>

The acknowledgment state is persistent to the ledger first. <span class="hljs-keyword">When</span> the acknowledgment state fails to be persistent to the ledger, they are persistent to ZooKeeper. To track the stats of acknowledgment, you can configure the metrics for the managed cursor.

All the cursor acknowledgment state metrics are labelled with the following labels:

- namespace: `namespace=${pulsar_namespace}`. `${pulsar_namespace}` 是命名空间名称。

- ledger_name: `ledger_name=${pulsar_ledger_name}`. `${pulsar_ledger_name}` is the ledger name.

- cursor_name: `ledger_name=${pulsar_cursor_name}`. `${pulsar_cursor_name}` is the cursor name.

Name |<span class="hljs-string">Type </span>|<span class="hljs-string">Description </span>|<span class="hljs-string">\---</span>|<span class="hljs-string">\---</span>|<span class="hljs-string">\--- brk_ml_cursor_persistLedgerSucceed(namespace="", ledger_name="", cursor_name:"")</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The number of acknowledgment states that is persistent to a ledger.</span>|<span class="hljs-string"> brk_ml_cursor_persistLedgerErrors(namespace="", ledger_name="", cursor_name:"")</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The number of ledger errors occurred when acknowledgment states fail to be persistent to the ledger.</span>|<span class="hljs-string"> brk_ml_cursor_persistZookeeperSucceed(namespace="", ledger_name="", cursor_name:"")</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The number of acknowledgment states that is persistent to ZooKeeper. brk_ml_cursor_persistZookeeperErrors(namespace="", ledger_name="", cursor_name:"")</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The number of ledger errors occurred when acknowledgment states fail to be persistent to ZooKeeper. brk_ml_cursor_nonContiguousDeletedMessagesRange(namespace="", ledger_name="", cursor_name:"")</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The number of non-contiguous deleted messages ranges.

### LoadBalancing 度量值

所有负载均衡度量值都带有以下标签：

- 集群: cluster=${pulsar_cluster}。 ${pulsar_cluster} 就是你在 `broker.conf` 中配置的集群名称。
- broker: broker=${broker}. ${broker} 是 broker 的 IP 地址
- 度量值: metric="loadBalancing"。 

</span>|<span class="hljs-string"> 配置项                               </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                </span>|
|<span class="hljs-string"> --------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ----------------- </span>|
|<span class="hljs-string"> pulsar_lb_bandwidth_in_usage  </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 正在使用的 broker 带宽   </span>|
|<span class="hljs-string"> pulsar_lb_bandwidth_out_usage </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 不在使用的 broker 带宽   </span>|
|<span class="hljs-string"> pulsar_lb_cpu_usage             </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> broker 的 cpu 使用量  </span>|
|<span class="hljs-string"> pulsar_lb_directMemory_usage    </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> broker 进程的直接内存使用量 </span>|
|<span class="hljs-string"> pulsar_lb_memory_usage          </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> broker 进程的内存使用量   </span>|


<span class="hljs-comment">#### BundleUnloading 度量值</span>

所有 bundleUnloading 度量值都带有以下标签：

- 集群: cluster=${pulsar_cluster}。 ${pulsar_cluster} 就是你在 `broker.conf` 中配置的集群名称。
- 度量值: metric=<span class="hljs-string">"bundleUnloading"</span>。 

|<span class="hljs-string"> 配置项                               </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                          </span>|
|<span class="hljs-string"> --------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> --------------------------- </span>|
|<span class="hljs-string"> pulsar_lb_unload_broker_count </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 在本次 bundle 卸载中卸载的 broker 计数 </span>|
|<span class="hljs-string"> pulsar_lb_unload_bundle_count </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 在本次 bundle 卸载中卸载的 bundle 计数 </span>|


<span class="hljs-comment">#### BundleSplit 度量值</span>

所有 bundleUnloading 度量值都带有以下标签：

- 集群: cluster=${pulsar_cluster}。 ${pulsar_cluster} 就是你在 `broker.conf` 中配置的集群名称。
- 度量值: metric=<span class="hljs-string">"bundlesSplit"</span>。 

|<span class="hljs-string"> 配置项                               </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                            </span>|
|<span class="hljs-string"> --------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ----------------------------- </span>|
|<span class="hljs-string"> pulsar_lb_bundles_split_count </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 在本次 bundle 切分检查中切分的 bundle 计数 </span>|


<span class="hljs-comment">### Subscription metrics</span>

&gt; 订阅度量值只有在 `exposeTopicLevelMetricsInPrometheus` 被设为 `true` 时才暴露。

All the subscription metrics are labelled with the following labels:

- <span class="hljs-symbol">*</span>集群<span class="hljs-symbol">*</span>: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。
- <span class="hljs-symbol">*</span>命名空间<span class="hljs-symbol">*</span>: `namespace=${pulsar_namespace}`。 `${pulsar_namespace}` 是命名空间名称。
- <span class="hljs-symbol">*</span>主题<span class="hljs-symbol">*</span>: `topic=${pulsar_topic}`。 `${pulsar_topic}` 是主题名。
- <span class="hljs-symbol">*</span>subscription<span class="hljs-symbol">*</span>: `subscription=${subscription}`. `${subscription}` is the topic subscription name.

|<span class="hljs-string"> 配置项                                                 </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                                                                       </span>|
|<span class="hljs-string"> --------------------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ---------------------------------------------------------------------------------------- </span>|
|<span class="hljs-string"> pulsar_subscription_back_log                      </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The total backlog of a subscription (messages).                                          </span>|
|<span class="hljs-string"> pulsar_subscription_delayed                       </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The total number of messages are delayed to be dispatched for a subscription (messages). </span>|
|<span class="hljs-string"> pulsar_subscription_msg_rate_redeliver          </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The total message rate for message being redelivered (messages/second).                  </span>|
|<span class="hljs-string"> pulsar_subscription_unacked_messages              </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The total number of unacknowledged messages of a subscription (messages).                </span>|
|<span class="hljs-string"> pulsar_subscription_blocked_on_unacked_messages </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> Indicate whether a subscription is blocked on unacknowledged messages or not.            </span>|


- 1 means the subscription is blocked on waiting unacknowledged messages to be acked.
- 0 means the subscription is not blocked on waiting unacknowledged messages to be acked.

|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_subscription_msg_rate_out </span>|<span class="hljs-string"> Gauge </span>|<span class="hljs-string"> The total message dispatch rate for a subscription (messages/second). </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_subscription_msg_throughput_out </span>|<span class="hljs-string"> Gauge </span>|<span class="hljs-string"> The total message dispatch throughput for a subscription (bytes/second). </span>|

<span class="hljs-comment">### Consumer metrics</span>

&gt; 消费者度量值只有当 `exposeTopicLevelMetricsInPrometheus` 和 `exposeConsumerLevelMetricsInPrometheus` 都设为 `true` 时才暴露。

All the consumer metrics are labelled with the following labels:

- <span class="hljs-symbol">*</span>集群<span class="hljs-symbol">*</span>: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。
- <span class="hljs-symbol">*</span>命名空间<span class="hljs-symbol">*</span>: `namespace=${pulsar_namespace}`。 `${pulsar_namespace}` 是命名空间名称。
- <span class="hljs-symbol">*</span>主题<span class="hljs-symbol">*</span>: `topic=${pulsar_topic}`。 `${pulsar_topic}` 是主题名。
- <span class="hljs-symbol">*</span>subscription<span class="hljs-symbol">*</span>: `subscription=${subscription}`. `${subscription}` is the topic subscription name.
- <span class="hljs-symbol">*</span>consumer_name<span class="hljs-symbol">*</span>: `consumer_name=${consumer_name}`. `${consumer_name}` is the topic consumer name.
- <span class="hljs-symbol">*</span>consumer_id<span class="hljs-symbol">*</span>: `consumer_id=${consumer_id}`. `${consumer_id}` is the topic consumer id.

|<span class="hljs-string"> 配置项                                             </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                                                        </span>|
|<span class="hljs-string"> ----------------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ------------------------------------------------------------------------- </span>|
|<span class="hljs-string"> pulsar_consumer_msg_rate_redeliver          </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The total message rate for message being redelivered (messages/second).   </span>|
|<span class="hljs-string"> pulsar_consumer_unacked_messages              </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The total number of unacknowledged messages of a consumer (messages).     </span>|
|<span class="hljs-string"> pulsar_consumer_blocked_on_unacked_messages </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> Indicate whether a consumer is blocked on unacknowledged messages or not. </span>|


- 1 means the consumer is blocked on waiting unacknowledged messages to be acked.
- 0 means the consumer is not blocked on waiting unacknowledged messages to be acked.

|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_consumer_msg_rate_out </span>|<span class="hljs-string"> Gauge </span>|<span class="hljs-string"> The total message dispatch rate for a consumer (messages/second). </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_consumer_msg_throughput_out </span>|<span class="hljs-string"> Gauge </span>|<span class="hljs-string"> The total message dispatch throughput for a consumer (bytes/second). </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> pulsar_consumer_available_permits </span>|<span class="hljs-string"> Gauge </span>|<span class="hljs-string"> The available permits for for a consumer. </span>|

<span class="hljs-comment">### 托管的 ledger bookie 客户端度量值</span>

所有的托管 ledger bookie 客户端度量值都带有以下标签：

- <span class="hljs-symbol">*</span>集群<span class="hljs-symbol">*</span>: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。

|<span class="hljs-string"> 配置项                                                                           </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                                                                                  </span>|
|<span class="hljs-string"> ----------------------------------------------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> --------------------------------------------------------------------------------------------------- </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_scheduler_completed_tasks_* </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 调度程序执行器已执行完成的任务数。   
由 `broker.conf` 中 `managedLedgerNumerThrad` 配置的调度器线程数所决定的度量值数。                 </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_scheduler_queue_*             </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 在调度器执行者队列中排队的任务数量。   
由 `broker.conf` 中 `managedLedgerNumerThrad` 配置的调度器线程数所决定的度量值数。                </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_scheduler_total_tasks_*     </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 调度程序执行器接收的任务数。   
由 `broker.conf` 中 `managedLedgerNumerThrad` 配置的调度器线程数所决定的度量值数。                    </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_workers_completed_tasks_*   </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> worker 执行器已执行完成的任务数。   
由 `broker.conf` 中 `managedLedgerNumWorkerThreads` 配置的 worker 任务线程数所决定的度量值数。 </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_workers_queue_*               </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 在 worker 执行者队列中排队的任务数量。   
由 `broker.conf` 中 `managedLedgerNumWorkerThreads` 配置的调度器线程数所决定的度量值数。     </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_workers_total_tasks_*       </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> worker 执行器接收的任务数。   
由 `broker.conf` 中 `managedLedgerNumWorkerThreads` 配置的 worker 线程数所决定的度量值数。      </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_scheduler_task_execution      </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 按毫秒计算的调度器任务执行延迟。                                                                                    </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_scheduler_task_queued         </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 按毫秒计算的调度器任务排队延迟。                                                                                    </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_workers_task_execution        </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 按毫秒计算的 worker 任务执行延迟。                                                                               </span>|
|<span class="hljs-string"> pulsar_managedLedger_client_bookkeeper_ml_workers_task_queued           </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 按毫秒计算的 worker 任务排队延迟。                                                                               </span>|


<span class="hljs-comment">### Token metrics</span>

All the token metrics are labelled with the following labels:

- <span class="hljs-symbol">*</span>集群<span class="hljs-symbol">*</span>: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。

|<span class="hljs-string"> 配置项                             </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                                </span>|
|<span class="hljs-string"> ------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ------------------------------------------------- </span>|
|<span class="hljs-string"> pulsar_expired_token_count    </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The number of expired tokens in Pulsar.           </span>|
|<span class="hljs-string"> pulsar_expiring_token_minutes </span>|<span class="hljs-string"> 直方图 </span>|<span class="hljs-string"> The remaining time of expiring tokens in minutes. </span>|


<span class="hljs-comment">### Authentication metrics</span>

All the authentication metrics are labelled with the following labels:

- <span class="hljs-symbol">*</span>集群<span class="hljs-symbol">*</span>: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。
- <span class="hljs-symbol">*</span>provider_name<span class="hljs-symbol">*</span>: `provider_name=${provider_name}`. `${provider_name}` is the class name of the authentication provider.
- <span class="hljs-symbol">*</span>auth_method<span class="hljs-symbol">*</span>: `auth_method=${auth_method}`. `${auth_method}` is the authentication method of the authentication provider.
- <span class="hljs-symbol">*</span>reason<span class="hljs-symbol">*</span>: `reason=${reason}`. `${reason}` is the reason for failing authentication operation. (This label is only for `pulsar_authentication_failures_count`.)

|<span class="hljs-string"> 配置项                                    </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                                  </span>|
|<span class="hljs-string"> -------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> --------------------------------------------------- </span>|
|<span class="hljs-string"> pulsar_authentication_success_count  </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The number of successful authentication operations. </span>|
|<span class="hljs-string"> pulsar_authentication_failures_count </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The number of failing authentication operations.    </span>|


<span class="hljs-comment">### Connection metrics</span>

All the connection metrics are labelled with the following labels:

- <span class="hljs-symbol">*</span>集群<span class="hljs-symbol">*</span>: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。
- <span class="hljs-symbol">*</span>broker<span class="hljs-symbol">*</span>: `broker=${advertised_address}`. `${advertised_address}` is the advertised address of the broker.
- <span class="hljs-symbol">*</span>metric<span class="hljs-symbol">*</span>: `metric=${metric}`. `${metric}` is the connection metric collective name.

|<span class="hljs-string"> 配置项                                                  </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                                                   </span>|
|<span class="hljs-string"> ---------------------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> -------------------------------------------------------------------- </span>|
|<span class="hljs-string"> pulsar_active_connections                          </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The number of active connections.                                    </span>|
|<span class="hljs-string"> pulsar_connection_created_total_count            </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The total number of connections.                                     </span>|
|<span class="hljs-string"> pulsar_connection_create_success_count           </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The number of successfully created connections.                      </span>|
|<span class="hljs-string"> pulsar_connection_create_fail_count              </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The number of failed connections.                                    </span>|
|<span class="hljs-string"> pulsar_connection_closed_total_count             </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The total number of closed connections.                              </span>|
|<span class="hljs-string"> pulsar_broker_throttled_connections                </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The number of throttled connections.                                 </span>|
|<span class="hljs-string"> pulsar_broker_throttled_connections_global_limit </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> The number of throttled connections because of per-connection limit. </span>|


<span class="hljs-comment">## Pulsar Functions</span>

所有 Pulsar Functions 度量值都带有以下标签：

- <span class="hljs-symbol">*</span>集群<span class="hljs-symbol">*</span>: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。
- <span class="hljs-symbol">*</span>命名空间<span class="hljs-symbol">*</span>: `namespace=${pulsar_namespace}`。 `${pulsar_namespace}` 是命名空间名称。

|<span class="hljs-string"> 配置项                                                   </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                                                        </span>|
|<span class="hljs-string"> ----------------------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ------------------------------------------------------------------------- </span>|
|<span class="hljs-string"> pulsar_function_processed_successfully_total      </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The total number of messages processed successfully.                      </span>|
|<span class="hljs-string"> pulsar_function_processed_successfully_total_1min </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The total number of messages processed successfully in the last 1 minute. </span>|
|<span class="hljs-string"> pulsar_function_system_exceptions_total           </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The total number of system exceptions.                                    </span>|
|<span class="hljs-string"> pulsar_function_system_exceptions_total_1min      </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The total number of system exceptions in the last 1 minute.               </span>|
|<span class="hljs-string"> pulsar_function_user_exceptions_total             </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The total number of user exceptions.                                      </span>|
|<span class="hljs-string"> pulsar_function_user_exceptions_total_1min        </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The total number of user exceptions in the last 1 minute.                 </span>|
|<span class="hljs-string"> pulsar_function_process_latency_ms                </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> The process latency in milliseconds.                                      </span>|
|<span class="hljs-string"> pulsar_function_process_latency_ms_1min           </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> The process latency in milliseconds in the last 1 minute.                 </span>|
|<span class="hljs-string"> pulsar_function_last_invocation                     </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 该函数最后一次调用的时间戳。                                                            </span>|
|<span class="hljs-string"> pulsar_function_received_total                      </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The total number of messages received from source.                        </span>|
|<span class="hljs-string"> pulsar_function_received_total_1min               </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> The total number of messages received from source in the last 1 minute.   </span>|
pulsar_function_user_metric_ |<span class="hljs-string"> Summary</span>|<span class="hljs-string">The user-defined metrics. 

## Connectors

All the Pulsar connector metrics are labelled with the following labels:

- *集群*: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。
- *命名空间*: `namespace=${pulsar_namespace}`。 `${pulsar_namespace}` 是命名空间名称。

Connector metrics contain **source** metrics and **sink** metrics.

- **Source** metrics
 
 </span>|<span class="hljs-string"> 配置项 </span>|<span class="hljs-string"> 类型 </span>|<span class="hljs-string"> 说明 </span>|
 |<span class="hljs-string"> --- </span>|<span class="hljs-string"> -- </span>|<span class="hljs-string"> -- </span>|
 |<span class="hljs-string">     </span>|<span class="hljs-string">    </span>|<span class="hljs-string">    </span>|
pulsar_source_written_total|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of records written to a Pulsar topic. pulsar_source_written_total_1min</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of records written to a Pulsar topic in the last 1 minute. pulsar_source_received_total</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of records received from source. pulsar_source_received_total_1min</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of records received from source in the last 1 minute. pulsar_source_last_invocation</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The timestamp of the last invocation of the source. pulsar_source_source_exception</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The exception from a source. pulsar_source_source_exceptions_total</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of source exceptions. pulsar_source_source_exceptions_total_1min </span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of source exceptions in the last 1 minute. pulsar_source_system_exception</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The exception from system code. pulsar_source_system_exceptions_total</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of system exceptions. pulsar_source_system_exceptions_total_1min</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of system exceptions in the last 1 minute. pulsar_source_user_metric_ </span>|<span class="hljs-string"> Summary</span>|<span class="hljs-string">The user-defined metrics.

- **Sink** metrics
 
 </span>|<span class="hljs-string"> 配置项 </span>|<span class="hljs-string"> 类型 </span>|<span class="hljs-string"> 说明 </span>|
 |<span class="hljs-string"> --- </span>|<span class="hljs-string"> -- </span>|<span class="hljs-string"> -- </span>|
 |<span class="hljs-string">     </span>|<span class="hljs-string">    </span>|<span class="hljs-string">    </span>|
pulsar_sink_written_total|<span class="hljs-string">Counter</span>|<span class="hljs-string"> The total number of records processed by a sink. pulsar_sink_written_total_1min</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string"> The total number of records processed by a sink in the last 1 minute. pulsar_sink_received_total_1min</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string"> The total number of messages that a sink has received from Pulsar topics in the last 1 minute. pulsar_sink_received_total</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string"> The total number of records that a sink has received from Pulsar topics. pulsar_sink_last_invocation</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The timestamp of the last invocation of the sink. pulsar_sink_sink_exception</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The exception from a sink. pulsar_sink_sink_exceptions_total</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of sink exceptions. pulsar_sink_sink_exceptions_total_1min </span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of sink exceptions in the last 1 minute. pulsar_sink_system_exception</span>|<span class="hljs-string">Gauge</span>|<span class="hljs-string">The exception from system code. pulsar_sink_system_exceptions_total</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of system exceptions. pulsar_sink_system_exceptions_total_1min</span>|<span class="hljs-string">Counter</span>|<span class="hljs-string">The total number of system exceptions in the last 1 minute. pulsar_sink_user_metric_ </span>|<span class="hljs-string"> Summary</span>|<span class="hljs-string">The user-defined metrics.

## 代理

所有代理度量值都带有以下标签：

- *集群*: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。
- *kubernetes_pod_name*: `kubernetes_pod_name=${kubernetes_pod_name}`. `${kubernetes_pod_name}` 是 kubernetes pod 名称。

</span>|<span class="hljs-string"> 配置项                                 </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明              </span>|
|<span class="hljs-string"> ----------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> --------------- </span>|
|<span class="hljs-string"> pulsar_proxy_active_connections   </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> 代理中当前活动的连接数量。   </span>|
|<span class="hljs-string"> pulsar_proxy_new_connections      </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 代理中正在打开的连接的计数器。 </span>|
|<span class="hljs-string"> pulsar_proxy_rejected_connections </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 由于阈值而拒绝的连接计数器。  </span>|
|<span class="hljs-string"> pulsar_proxy_binary_ops           </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 代理操作计数器。        </span>|
|<span class="hljs-string"> pulsar_proxy_binary_bytes         </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 代理字节计数器。        </span>|


<span class="hljs-comment">## Pulsar SQL Worker</span>

|<span class="hljs-string"> 配置项                                                   </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                </span>|
|<span class="hljs-string"> ----------------------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> --------------------------------- </span>|
|<span class="hljs-string"> split_bytes_read                                    </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 从 BookKeeper 读取的字节数。              </span>|
|<span class="hljs-string"> split_num_messages_deserialized                     </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 反序列化的消息数量。                        </span>|
|<span class="hljs-string"> split_num_record_deserialized                       </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> 反序列化的记录数量。                        </span>|
|<span class="hljs-string"> split_bytes_read_per_query                        </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个查询中读取的字节总数.                     </span>|
|<span class="hljs-string"> split_entry_deserialize_time                        </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 用于对条目进行反序列化的时间。                   </span>|
|<span class="hljs-string"> split_entry_deserialize_time_per_query            </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 用于对每个查询中的条目进行反序列化的时间。             </span>|
|<span class="hljs-string"> split_entry_queue_dequeue_wait_time               </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 由于队列为空而等待从条目队列获取条目花费的时间。          </span>|
|<span class="hljs-string"> split_entry_queue_dequeue_wait_time_per_query   </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 从每个查询的条目队列中等待获取条目的总时间。            </span>|
|<span class="hljs-string"> split_message_queue_dequeue_wait_time_per_query </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个查询中由于队列为空而等待从消息队列中移除所花的时间。      </span>|
|<span class="hljs-string"> split_message_queue_enqueue_wait_time             </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 由于消息队列已满，等待进入消息队列的时间。             </span>|
|<span class="hljs-string"> split_message_queue_enqueue_wait_time_per_query </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个查询中由于消息队列已满，等待进入消息队列的时间。        </span>|
|<span class="hljs-string"> split_num_entries_per_batch                       </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个批处理的条目数。                        </span>|
|<span class="hljs-string"> split_num_entries_per_query                       </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个查询的条目数。                         </span>|
|<span class="hljs-string"> split_num_messages_deserialized_per_entry         </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个条目反序列化的消息数量。                    </span>|
|<span class="hljs-string"> split_num_messages_deserialized_per_query         </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个查询反序列化的消息数量。                    </span>|
|<span class="hljs-string"> split_read_attempts                                 </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 读取尝试次数(如果队列已满会失败)。                </span>|
|<span class="hljs-string"> split_read_attempts_per_query                     </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个查询的读取尝试次数。                      </span>|
|<span class="hljs-string"> split_read_latency_per_batch                      </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个批处理的读取延迟。                       </span>|
|<span class="hljs-string"> split_read_latency_per_query                      </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个查询的总读取延迟。                       </span>|
|<span class="hljs-string"> split_record_deserialize_time                       </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 将消息反序列化到记录花费的时间。 例如，Avro、JSON 等等。 </span>|
|<span class="hljs-string"> split_record_deserialize_time_per_query           </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> 每个查询将消息反序列化到记录花费的时间。              </span>|
|<span class="hljs-string"> split_total_execution_time                          </span>|<span class="hljs-string"> 总结  </span>|<span class="hljs-string"> The total execution time.         </span>|


<span class="hljs-comment">## Pulsar transaction</span>

All the transaction metrics are labelled with the following labels:

- <span class="hljs-symbol">*</span>集群<span class="hljs-symbol">*</span>: `cluster=${pulsar_cluster}`。 `${pulsar_cluster}` 就是你在 `broker.conf` 中配置的集群名称。
- <span class="hljs-symbol">*</span>coordinator_id<span class="hljs-symbol">*</span>: `coordinator_id=${coordinator_id}`. `${coordinator_id}` is the coordinator id.

|<span class="hljs-string"> 配置项                                   </span>|<span class="hljs-string"> 类型  </span>|<span class="hljs-string"> 说明                                                                  </span>|
|<span class="hljs-string"> ------------------------------------- </span>|<span class="hljs-string"> --- </span>|<span class="hljs-string"> ------------------------------------------------------------------- </span>|
|<span class="hljs-string"> pulsar_txn_active_count             </span>|<span class="hljs-string"> 计量表 </span>|<span class="hljs-string"> Number of active transactions.                                      </span>|
|<span class="hljs-string"> pulsar_txn_created_count            </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> Number of created transactions.                                     </span>|
|<span class="hljs-string"> pulsar_txn_committed_count          </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> Number of committed transactions.                                   </span>|
|<span class="hljs-string"> pulsar_txn_aborted_count            </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> Number of aborted transactions of this coordinator.                 </span>|
|<span class="hljs-string"> pulsar_txn_timeout_count            </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> Number of timeout transactions.                                     </span>|
|<span class="hljs-string"> pulsar_txn_append_log_count       </span>|<span class="hljs-string"> 计数器 </span>|<span class="hljs-string"> Number of append transaction logs.                                  </span>|
|<span class="hljs-string"> pulsar_txn_execution_latency_le_* </span>|<span class="hljs-string"> 直方图 </span>|<span class="hljs-string"> Transaction execution latency.   
Available latencies are as below: </span>|


- latency=<span class="hljs-string">"10"</span> is TransactionExecutionLatency between (0ms, 10ms]
- latency=<span class="hljs-string">"20"</span> is TransactionExecutionLatency between (10ms, 20ms]
- latency=<span class="hljs-string">"50"</span> is TransactionExecutionLatency between (20ms, 50ms]
- latency=<span class="hljs-string">"100"</span> is TransactionExecutionLatency between (50ms, 100ms]
- latency=<span class="hljs-string">"500"</span> is TransactionExecutionLatency between (100ms, 500ms]
- latency=<span class="hljs-string">"1000"</span> is TransactionExecutionLatency between (500ms, 1000ms]
- latency=<span class="hljs-string">"5000"</span> is TransactionExecutionLatency between (1s, 5s]
- latency=<span class="hljs-string">"15000"</span> is TransactionExecutionLatency between (5s, 15s]
- latency=<span class="hljs-string">"30000"</span> is TransactionExecutionLatency between (15s, 30s]<span class="hljs-variable">&lt;/li&gt;</span>

- latency=<span class="hljs-string">"60000"</span> is TransactionExecutionLatency between (30s, 60s]
- latency=<span class="hljs-string">"300000"</span> is TransactionExecutionLatency between (1m,5m]
- latency=<span class="hljs-string">"1500000"</span> is TransactionExecutionLatency between (5m,15m]
- latency=<span class="hljs-string">"3000000"</span> is TransactionExecutionLatency between (15m,30m]
- latency=<span class="hljs-string">"overflow"</span> is TransactionExecutionLatency between (30m,∞]

|</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/zh-CN/next/reference-configuration"><span class="arrow-prev">← </span><span>Pulsar configuration</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#zookeeper">ZooKeeper</a><ul class="toc-headings"><li><a href="#服务器度量值">服务器度量值</a></li><li><a href="#请求度量值">请求度量值</a></li></ul></li><li><a href="#bookkeeper">BookKeeper</a><ul class="toc-headings"><li><a href="#服务器度量值-1">服务器度量值</a></li><li><a href="#日志度量值">日志度量值</a></li><li><a href="#存储度量值">存储度量值</a></li></ul></li><li><a href="#broker">Broker</a><ul class="toc-headings"><li><a href="#命名空间度量值">命名空间度量值</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2021 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</section><span><script>
      const community = document.querySelector("a[href='#community']").parentNode;
      const communityMenu =
        '<li>' +
        '<a id="community-menu" href="#">Community <span style="font-size: 0.75em">&nbsp;▼</span></a>' +
        '<div id="community-dropdown" class="hide">' +
          '<ul id="community-dropdown-items">' +
            '<li><a href="/zh-CN/contact">Contact</a></li>' +
            '<li><a href="/zh-CN/contributing">Contributing</a></li>' +
            '<li><a href="/zh-CN/coding-guide">Coding guide</a></li>' +
            '<li><a href="/zh-CN/events">Events</a></li>' +
            '<li><a href="https://twitter.com/Apache_Pulsar" target="_blank">Twitter &#x2750</a></li>' +
            '<li><a href="https://github.com/apache/pulsar/wiki" target="_blank">Wiki &#x2750</a></li>' +
            '<li><a href="https://github.com/apache/pulsar/issues" target="_blank">Issue tracking &#x2750</a></li>' +
            '<li><a href="https://pulsar-summit.org/" target="_blank">Pulsar Summit &#x2750</a></li>' +
            '<li>&nbsp;</li>' +
            '<li><a href="/zh-CN/resources">Resources</a></li>' +
            '<li><a href="/zh-CN/team">Team</a></li>' +
            '<li><a href="/zh-CN/powered-by">Powered By</a></li>' +
          '</ul>' +
        '</div>' +
        '</li>';

      community.innerHTML = communityMenu;

      const communityMenuItem = document.getElementById("community-menu");
      const communityDropDown = document.getElementById("community-dropdown");
      communityMenuItem.addEventListener("click", function(event) {
        event.preventDefault();

        if (communityDropDown.className == 'hide') {
          communityDropDown.className = 'visible';
        } else {
          communityDropDown.className = 'hide';
        }
      });
    </script></span></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'd226a455cecdd4bc18a554c1b47e5b52',
                indexName: 'apache_pulsar',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:zh-CN","version:next"]}
              });
            </script></body></html>